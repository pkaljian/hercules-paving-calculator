<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Residential Yard Paving Compliance Calculator ‚Äî Hercules ¬ß13-30.750</title>
  <style>
    :root{
      --bg:#f4f6f9; --panel:#ffffff; --text:#1b2a41; --muted:#64748b; --brand:#1f3f68; --brand-900:#173352; --accent:#d4a017; --line:#e5e9f2;
      --good:#198754; --bad:#d9534f; --warn:#e39b27;
    }
    * { box-sizing: border-box; }
    html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji"}
    a{color:var(--brand);text-decoration:underline;text-underline-offset:2px}
    a:hover{color:var(--brand-900)}
    .wrap{max-width:980px;margin:0 auto;padding:28px}
    h1{font-size:1.75rem;margin:0 0 16px;color:var(--brand)}
    h2{font-size:1.1rem;margin:24px 0 8px;color:var(--brand)}
    .panel{background:var(--panel);border:1px solid var(--line);border-radius:14px;padding:18px;box-shadow:0 6px 20px rgba(31,63,104,.06);margin-bottom:14px; overflow:hidden;}
    .row{display:grid;grid-template-columns:minmax(180px,260px) 1fr;gap:14px;align-items:center;margin:10px 0}
    label{font-size:.95rem;color:var(--brand-900)}
    input[type="number"],select,input[type="text"]{width:100%;padding:11px 12px;border-radius:10px;border:1px solid var(--line);background:#fff;color:var(--text)}
    input::placeholder{color:#8590c7}
    .help{grid-column:2 / span 1;font-size:.85rem;color:var(--muted);margin-top:-6px}
    .tiny{font-size:.9rem;color:var(--muted)}
    .inline{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .badge{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;font-weight:600;border:1px solid var(--line);background:#f8fafc;color:var(--text)}
    .ok{background:rgba(25,135,84,.08);color:#0f5132;border-color:rgba(25,135,84,.25)}
    .no{background:rgba(217,83,79,.08);color:#842029;border-color:rgba(217,83,79,.25)}
    .warn{background:rgba(227,155,39,.10);color:#7a4a08;border-color:rgba(227,155,39,.28)}
    .cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px}
    .card{background:#fff;border:1px solid var(--line);border-radius:12px;padding:14px;box-shadow:0 3px 14px rgba(31,63,104,.05)}
    .kv{display:flex;justify-content:space-between;gap:10px;margin:6px 0}
    .btns{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    button{cursor:pointer;background:var(--brand);border:1px solid var(--brand);color:#fff;padding:10px 14px;border-radius:10px;font-weight:600;box-shadow:0 2px 0 rgba(0,0,0,.04)}
    button:hover{background:var(--brand-900);border-color:var(--brand-900)}
    .hr{height:1px;background:var(--line);margin:14px 0}
    .alert{padding:10px;border-radius:10px;margin-top:10px}
    .alert.warn{background:rgba(227,155,39,.08);border:1px solid rgba(227,155,39,.28);color:#7a4a08}
    .alert.no{background:rgba(217,83,79,.08);border:1px solid rgba(217,83,79,.28);color:#842029}
    .alert.ok{background:rgba(25,135,84,.08);border:1px solid rgba(25,135,84,.28);color:#0f5132}
    .hide{display:none}

    /* Figure styles */
    .figure { text-align: center; margin: 12px 0 18px; }
    .figure img { max-width: 100%; height: auto; border: 1px solid var(--line); border-radius: 10px; box-shadow: 0 3px 14px rgba(31,63,104,.05); }
    .figure figcaption { font-size: .85rem; color: var(--muted); margin-top: 6px; }

    /* Footer link */
    .pagefoot{ text-align:center; margin:18px 0 6px; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>
      Residential Yard Paving Compliance Calculator
      <span class="tiny">
        (<a href="https://www.codepublishing.com/CA/Hercules/#!/Hercules13/Hercules1330.html#13-30.750"
            target="_blank" rel="noopener noreferrer">
          Hercules Municipal Code ¬ß13-30.750
        </a>)
      </span>
    </h1>

    <!-- Figure 13-30.751 ‚Äî Residential Paving Diagram -->
    <figure class="figure" aria-describedby="fig-1330751">
      <img
        src="./Screenshot%202025-11-05%20160901.png"
        alt="Figure 13-30.751 ‚Äî Limits on Paving and Hardscaping for Residential Front, Rear, and Side Yards">
      <figcaption id="fig-1330751" class="tiny">
        Figure 13-30.751 ‚Äî Limits on Paving and Hardscaping for Residential Front, Rear, and Side Yards
      </figcaption>
    </figure>

    <div class="panel">
      <h2>Where to find your official lot &amp; building sizes</h2>
      <p class="tiny">Look up recorded information via ParcelQuest:
        <a href="https://assr.parcelquest.com/" target="_blank" rel="noopener">assr.parcelquest.com</a>.
        Then enter those numbers below.</p>
    </div>

    <div class="panel">
      <h2>1) Lot &amp; Basics</h2>
      <div class="row">
        <label for="lot">Lot area (sf)</label>
        <input id="lot" type="number" min="0" step="1" placeholder="e.g., 6,000"/>
        <div class="help">Lot area = total parcel area.</div>
      </div>

      <div class="row">
        <label for="zone">Zoning</label>
        <select id="zone">
          <option value="RS-L">RS-L</option>
          <option value="OTHER">Other residential</option>
        </select>
      </div>

      <div class="row">
        <label for="bldg">Building footprint (impervious; sf)</label>
        <input id="bldg" type="number" min="0" step="1" placeholder="e.g., 1,800"/>
        <div class="help">Building footprint = plan-view area of all roofed structures. Use auto-calc for multi-story homes.</div>
      </div>

      <div class="row">
        <label></label>
        <label class="tiny" style="display:flex;align-items:center;gap:8px">
          <input id="autoBldg" type="checkbox" checked>
          Auto-calculate building footprint as <em>lot ‚àí (front yard + rear/side yard)</em>
        </label>
      </div>
      <p class="tiny" id="autoBldgNote" style="margin:4px 0 0 0;"></p>
    </div>

    <div class="panel">
      <h2>2) Yard Areas</h2>
      <div class="row"><label for="frontArea">Front yard area (sf)</label><input id="frontArea" type="number" min="0" step="1" placeholder="e.g., 1,800"/></div>
      <div class="row"><label for="rearSideArea">Rear + side yard area (sf)</label><input id="rearSideArea" type="number" min="0" step="1" placeholder="e.g., 3,600"/></div>
      <div id="areaCheck" class="alert warn hide"></div>
    </div>

    <div class="panel">
      <h2>3) Existing Paving (before project)</h2>
      <div class="row"><label for="frontDrive_exist">Front driveway paving (sf)</label><input id="frontDrive_exist" type="number" min="0" step="1"/></div>
      <div class="row"><label for="frontOther_exist">Front walkways &amp; other hardscape (sf)</label><input id="frontOther_exist" type="number" min="0" step="1"/></div>
      <div class="row"><label for="rearPave_exist">Rear + side paving (sf)</label><input id="rearPave_exist" type="number" min="0" step="1"/></div>
      <div class="row"><label>Total existing impermeable paving (sf)</label><div id="imperv_exist" class="tiny">‚Äî</div></div>
      <p class="tiny">Enter <em>impermeable</em> portions only (concrete, asphalt, compacted gravel). Permeable pavers count toward yard hardscape limits but not toward lot-wide impervious total.</p>
    </div>

    <div class="panel">
      <h2>4) Proposed Changes to Impervious Area (use negative numbers for removals)</h2>
      <div class="row"><label for="frontDrive_delta">Œî Front driveway paving (sf)</label><input id="frontDrive_delta" type="number" step="1"/></div>
      <div class="row"><label for="frontOther_delta">Œî Front walkways &amp; hardscape (sf)</label><input id="frontOther_delta" type="number" step="1"/></div>
      <div class="row"><label for="rearPave_delta">Œî Rear + side paving (sf)</label><input id="rearPave_delta" type="number" step="1"/></div>
      <div class="row"><label>Total proposed change in impermeable area (sf)</label><div id="imperv_delta" class="tiny">‚Äî</div></div>
      <div class="btns"><button id="calc">Calculate</button><button id="reset">Reset</button><button id="print">Print / Save PDF</button></div>
      <div id="permit120" class="alert warn hide"></div>
      <p class="tiny" id="nonconformNote" style="margin-top:8px;color:#555;"></p>
    </div>

    <div class="panel hide" id="results" aria-live="polite">
      <h2>Results</h2>
      <div class="cards">
        <div class="card" id="card_front_drive">
          <h3>Front: Driveway ‚â§ 35% of front yard</h3>
          <div class="kv"><span>Driveway area</span> <b id="fd_area">‚Äî</b></div>
          <div class="kv"><span>Percent of front yard</span> <b id="fd_pct">‚Äî</b></div>
          <div><span id="fd_badge" class="badge">‚Äî</span></div>
        </div>
        <div class="card" id="card_front_other">
          <h3>Front: Walkways &amp; other hardscape ‚â§ 25%</h3>
          <div class="kv"><span>Other hardscape area</span> <b id="fo_area">‚Äî</b></div>
          <div class="kv"><span>Percent of front yard</span> <b id="fo_pct">‚Äî</b></div>
          <div><span id="fo_badge" class="badge">‚Äî</span></div>
        </div>
        <div class="card" id="card_front_land">
          <h3>Front: Landscaped area ‚â• 40%</h3>
          <div class="kv"><span>Landscaped area</span> <b id="fl_area">‚Äî</b></div>
          <div class="kv"><span>Percent of front yard</span> <b id="fl_pct">‚Äî</b></div>
          <div><span id="fl_badge" class="badge">‚Äî</span></div>
        </div>
        <div class="card" id="card_rs_pave">
          <h3>Rear + side: Total paving ‚â§ 60%</h3>
          <div class="kv"><span>Total paving</span> <b id="rs_area">‚Äî</b></div>
          <div class="kv"><span>Percent of rear + side</span> <b id="rs_pct">‚Äî</b></div>
          <div><span id="rs_badge" class="badge">‚Äî</span></div>
        </div>
        <div class="card" id="card_rs_land">
          <h3>Rear + side: Landscaped area ‚â• 40%</h3>
          <div class="kv"><span>Landscaped area</span> <b id="rl_area">‚Äî</b></div>
          <div class="kv"><span>Percent of rear + side</span> <b id="rl_pct">‚Äî</b></div>
          <div><span id="rl_badge" class="badge">‚Äî</span></div>
        </div>
        <div class="card" id="card_storm">
          <h3>Stormwater: Impervious coverage (lot-wide)</h3>
          <div class="kv"><span>Impervious total (bldg + paving)</span> <b id="imp_area">‚Äî</b></div>
          <div class="kv"><span>Percent of lot</span> <b id="imp_pct">‚Äî</b></div>
          <div><span id="imp_badge" class="badge">‚Äî</span></div>
          <div id="imp_note" class="tiny" style="margin-top:6px"></div>
        </div>
      </div>

      <!-- Nonconforming-but-out-of-scope note (shows after Calculate when applicable) -->
      <p class="tiny" id="nonconformNoteResults" style="margin-top:8px;color:#555;"></p>

      <div class="hr"></div>
      <div class="tiny">
        <div><strong>Permit trigger:</strong> New paving &amp; hardscape additions over <b>120 sf</b> require a paving permit (Zoning Clearance). <span id="permitLine" class="muted"></span></div>
        <div>‚ÄúLandscaped area‚Äù excludes pavers, bricks, and other hard surfaces (even if permeable). Calculations are advisory; verify with the City. Source:
          <a href="https://www.codepublishing.com/CA/Hercules/#!/Hercules13/Hercules1330.html#13-30.750" target="_blank" rel="noopener">Hercules Municipal Code ¬ß13-30.750</a>.
        </div>
      </div>
    </div>

    <div class="pagefoot">
      <p class="tiny">
        <a href="https://www.herculesca.gov/home/showpublisheddocument/18190/638844704384000000"
           target="_blank" rel="noopener noreferrer">üìÑ Download the Paving Permit (PDF)</a>
      </p>
    </div>
  </div>

  <script>
    const $ = (id)=>document.getElementById(id);
    const fmt = (n)=>isFinite(n)?new Intl.NumberFormat().format(n):'‚Äî';
    const pct = (n)=>isFinite(n)?(n*100).toFixed(1)+'%':'‚Äî';
    const readNum=(id)=>parseFloat($(id).value)||0;

    function updateImpervTotals(){
      const fd0=readNum('frontDrive_exist');
      const fo0=readNum('frontOther_exist');
      const rs0=readNum('rearPave_exist');
      const fdD=readNum('frontDrive_delta');
      const foD=readNum('frontOther_delta');
      const rsD=readNum('rearPave_delta');
      const existing=fd0+fo0+rs0; // existing impermeable paving total
      const delta=fdD+foD+rsD;    // proposed change to impermeable
      $('imperv_exist').textContent=fmt(existing);
      $('imperv_delta').textContent=fmt(delta);
      return {existing, delta};
    }

    function setBadge(id, ok, on='Complies', off='Does not comply'){
      const el=$(id); el.className='badge ' + (ok? 'ok':'no'); el.textContent= ok? '‚úî '+on : '‚úñ '+off;
    }

    // --- Building auto-calc ---
    function maybeAutoSetBuilding() {
      const auto = $('autoBldg');
      const note = $('autoBldgNote');
      const bldgInput = $('bldg');
      if (!auto) return;

      // Lock/unlock field
      bldgInput.readOnly = !!auto.checked;

      if (!auto.checked) { note.textContent = ''; return; }

      const lot = readNum('lot');
      const front = readNum('frontArea');
      const rear  = readNum('rearSideArea');

      if (lot <= 0 || (front <= 0 && rear <= 0)) { note.textContent = ''; return; }

      const calc = lot - (front + rear);
      const val = Math.max(0, Math.round(calc)); // never negative
      bldgInput.value = val;

      if (calc < 0) {
        note.textContent = 'Heads up: front + rear/side exceed lot area ‚Äî double-check yard entries.';
      } else if (Math.abs((front + rear + val) - lot) > lot * 0.03) {
        note.textContent = 'Note: yard + building differs from lot area by more than ~3%.';
      } else {
        note.textContent = '';
      }
    }

    function calculateAndShow(){
      // ensure building reflects latest auto setting
      maybeAutoSetBuilding();

      const lot = readNum('lot');
      const zone = $('zone').value;
      const bldg = readNum('bldg');
      const frontArea = readNum('frontArea');
      const rearSideArea = readNum('rearSideArea');

      const fd0=readNum('frontDrive_exist');
      const fo0=readNum('frontOther_exist');
      const rs0=readNum('rearPave_exist');
      const fdD=readNum('frontDrive_delta');
      const foD=readNum('frontOther_delta');
      const rsD=readNum('rearPave_delta');

      const fd = Math.max(0, fd0 + fdD);
      const fo = Math.max(0, fo0 + foD);
      const rs = Math.max(0, rs0 + rsD);

      // Landscape areas
      const frontLand = Math.max(0, frontArea - (fd + fo));
      const rearLand  = Math.max(0, rearSideArea - rs);

      // Percents
      const fdPct = frontArea>0 ? fd/frontArea : NaN;
      const foPct = frontArea>0 ? fo/frontArea : NaN;
      const flPct = frontArea>0 ? frontLand/frontArea : NaN;
      const rsPct = rearSideArea>0 ? rs/rearSideArea : NaN;
      const rlPct = rearSideArea>0 ? rearLand/rearSideArea : NaN;

      // Compliance
      const fdOK = fdPct <= 0.35 + 1e-9;
      const foOK = foPct <= 0.25 + 1e-9;
      const flOK = flPct >= 0.40 - 1e-9;
      const rsOK = rsPct <= 0.60 + 1e-9;
      const rlOK = rlPct >= 0.40 - 1e-9;

      // Impervious totals (lot-wide)
      const {existing: impExist, delta: impDelta} = updateImpervTotals();
      const impPaving = Math.max(0, impExist + impDelta);
      const imp = impPaving + bldg;
      const impPct = lot>0 ? imp/lot : NaN;
      const impOver = zone==='RS-L' ? impPct>0.47+1e-9 : false;

      // Permit trigger (count only additions)
      const added = [fdD, foD, rsD].reduce((s,v)=> s + Math.max(0,v||0), 0);

      // Nonconforming note (per-feature nexus):
      // Show the note only when a feature is over its threshold AND its delta is exactly 0.
      // For lot-wide RS-L impervious (>47%), show the note only if total delta across features is 0.
      const anyFailNoScope =
        (!fdOK && fdD === 0) ||     // driveway over 35% but not being changed
        (!foOK && foD === 0) ||     // front other hardscape over 25% but not being changed
        (!rsOK && rsD === 0) ||     // rear+side over 60% but not being changed
        (impOver && (fdD + foD + rsD) === 0); // RS-L impervious >47% but no paving deltas proposed

      const noteR = $('nonconformNoteResults'); // (in Results)
      const note4 = $('nonconformNote');        // (in Step 4, optional)
      const noteTxt =
        'Note: If the total impervious or paving coverage exceeds a threshold but is outside of the scope of the proposal, no corrective action is required. Existing nonconforming site conditions are not subject to change unless modified by the applicant.';

      if (anyFailNoScope) {
        if (noteR) noteR.textContent = noteTxt;
        if (note4) note4.textContent = noteTxt;
      } else {
        if (noteR) noteR.textContent = '';
        if (note4) note4.textContent = '';
      }

      // Area check
      const sumKnown = bldg + frontArea + rearSideArea;
      const ac = $('areaCheck');
      if (lot>0 && sumKnown>0 && Math.abs(sumKnown - lot) > lot*0.03) {
        ac.classList.remove('hide');
        ac.textContent = `Heads up: building + front + rear/side = ${fmt(sumKnown)} sf, which differs from lot area (${fmt(lot)} sf). Double-check your areas.`;
      } else { ac.classList.add('hide'); ac.textContent=''; }

      // Write outputs
      $('fd_area').textContent = fmt(fd) + ' sf';
      $('fo_area').textContent = fmt(fo) + ' sf';
      $('rs_area').textContent = fmt(rs) + ' sf';
      $('fl_area').textContent = fmt(frontLand) + ' sf';
      $('rl_area').textContent = fmt(rearLand) + ' sf';

      $('fd_pct').textContent = pct(fdPct);
      $('fo_pct').textContent = pct(foPct);
      $('rs_pct').textContent = pct(rsPct);
      $('fl_pct').textContent = pct(flPct);
      $('rl_pct').textContent = pct(rlPct);

      setBadge('fd_badge', fdOK);
      setBadge('fo_badge', foOK);
      setBadge('fl_badge', flOK);
      setBadge('rs_badge', rsOK);
      setBadge('rl_badge', rlOK);

      $('imp_area').textContent = fmt(imp) + ' sf';
      $('imp_pct').textContent = pct(impPct);
      const impHost = $('imp_badge');
      if (!isFinite(impPct)) { impHost.className='badge warn'; impHost.textContent='‚Ñπ Enter lot & impervious inputs'; $('imp_note').textContent=''; }
      else if (zone==='RS-L' && impOver) { impHost.className='badge no'; impHost.textContent='‚úñ Exceeds 47% (RS-L) ‚Äî engineer calculations required'; $('imp_note').textContent='Per ¬ß13-30.750(C), if impervious (incl. structures) is > 47% in RS-L, submit civil engineer runoff calcs to the City Engineer.'; }
      else { impHost.className='badge ok'; impHost.textContent='‚úî Within advisory RS-L threshold'; $('imp_note').textContent = zone==='OTHER' ? 'For other residential zones, engineer submittal may be required per administrative regulations. Consult the City Engineer.' : ''; }

      const p = $('permit120');
      if (added > 120) { p.classList.remove('hide'); p.className='alert warn'; p.textContent = `This project adds approximately ${fmt(added)} sf of new paving/hardscape. A paving permit (Zoning Clearance) is required per ¬ß13-30.750(2).`; }
      else if (added>0) { p.classList.remove('hide'); p.className='alert ok'; p.textContent = `New paving/hardscape ~ ${fmt(added)} sf (‚â§ 120 sf). Zoning Clearance not triggered by size threshold.`; }
      else if (added===0) { p.classList.add('hide'); }
      else { p.classList.remove('hide'); p.className='alert ok'; p.textContent = 'Net reduction in paving ‚Äî permit size threshold not triggered.'; }

      $('permitLine').textContent = added? ` (your additions: ~${fmt(added)} sf)` : '';

      // Reveal results panel
      $('results').classList.remove('hide');
      $('results').scrollIntoView({behavior:'smooth', block:'start'});
    }

    // Wire up
    $('calc').addEventListener('click', calculateAndShow);
    $('reset').addEventListener('click',()=>{
      document.querySelectorAll('input').forEach(i=>i.value='');
      $('zone').value='RS-L';
      $('imperv_exist').textContent='‚Äî';
      $('imperv_delta').textContent='‚Äî';
      $('areaCheck').classList.add('hide');
      $('permit120').classList.add('hide');
      $('results').classList.add('hide');
      // reset auto building state
      const auto = $('autoBldg');
      if (auto) auto.checked = true;
      $('autoBldgNote').textContent = '';
      $('bldg').readOnly = true;
    });
    $('print').addEventListener('click',()=>window.print());

    // Keep totals live + update building auto-calc while typing
    document.querySelectorAll('input, select').forEach(el=>{
      el.addEventListener('input', ()=>{
        maybeAutoSetBuilding();
        updateImpervTotals();
      });
    });

    // Also react when the checkbox is toggled
    $('autoBldg')?.addEventListener('change', maybeAutoSetBuilding);

    // Initialize on load (lock building input initially)
    window.addEventListener('DOMContentLoaded', ()=>{
      $('bldg').readOnly = true;
    });
  </script>
</body>
</html>


